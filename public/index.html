<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WASM Passthrough</title>
</head>

<body>
    <h1>Double Pendulum Simulator</h1>
    <p>Compares multiple methods of integration for computing double pendulums, animated side by side</p>
    <script src="wasm/simulation.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script src="js/simAnimator.js"></script>
    <!-- params [m1, m2, l1, l2, t_start, t_end, steps, g, state[0], state[1], state[2], state[3], fps] -->

    <div style="display: flex; gap: 20px; flex-wrap: wrap">
        <div id="canvas-container"></div>
        <div id="chart-container1"></div>
        <div id="chart-container2"></div>
    </div>
    <div style="display: flex; gap: 20px; flex-wrap: wrap">
        <div name="basic-config">
            <div>
                <label for="mass-1">Mass 1</label>
                <input type="text" id="mass-1" name="mass-1" value="1">
            </div>
            <div>
                <label for="mass-2">Mass 2</label>
                <input type="text" id="mass-2" name="mass-2" value="1">
            </div>
            <div>
                <label for="length-1">Length 1</label>
                <input type="text" id="length-1" name="length-1" value="1">
            </div>
            <div>
                <label for="length-2">Length 2</label>
                <input type="text" id="length-2" name="length-2" value="1">
            </div>
            <div>
                <label for="gravity">Gavity</label>
                <input type="text" id="gravity" name="gravity" value="9.81">
            </div>
        </div>
        <div name="compute-config">
            <div>
                <label for="t-start">Start time in seconds</label>
                <input type="text" id="t-start" name="t-start" value="0">
            </div>
            <div>
                <label for="t_end">End time in seconds</label>
                <input type="text" id="t-end" name="t-end" value="10">
            </div>
            <div>
                <label for="steps">Steps taken (Mostly for naive Rk4)</label>
                <input type="text" id="steps" name="steps" value="1000">
            </div>
            <div>
                <label for="fps">Frames per second of the animation</label>
                <input type="text" id="fps" name="fps" value="24">
            </div>
        </div>
        <div name="init-cond-config">
            <div>
                <label for="init-state1">Initial angular position of first pendulum in radians</label>
                <input type="text" id="init-state-1" name="init-state-1" value="10">
            </div>
            <div>
                <label for="init-state2">Initial angular velocity of first pendulum in radians</label>
                <input type="text" id="init-state-2" name="init-state-2" value="0">
            </div>
            <div>
                <label for="init-state3">Initial angular position of second pendulum in radians</label>
                <input type="text" id="init-state-3" name="init-state-3" value="0">
            </div>
            <div>
                <label for="init-state4">Initial angular velocity of second pendulum in radians</label>
                <input type="text" id="init-state-4" name="init-state-4" value="0">
            </div>
        </div>
        <button onclick="runSimulation()">Run Simulation</button>
    </div>

</body>

</html>